<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Details - {{ date }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <h1>Details for {{ date }}</h1>

        <!-- Search Bar -->
        <form method="GET" action="/admin-dashboard/{{ masjid }}/details">
            <input type="hidden" name="date" value="{{ date }}">
            <input type="text" name="search" placeholder="Search by name or email" value="{{ search_query }}">
            <button type="submit">Search</button>
        </form>
        <br>

        <!-- Export Button -->
        <a href="/admin-dashboard/{{ masjid }}/export?date={{ date }}" class="button">Export Data</a>
        <br><br>

        <!-- Donor Details Table -->
        <table border="1">
            <thead>
                <tr>
                    <th>Donor Name</th>
                    <th>Phone</th>
                    <th>Email</th>
                    <th>Slots Booked</th>
                    <th>Payment Method</th>
                    <th>Payment Proof</th>
                </tr>
            </thead>
            <tbody>
                {% for donor in donors %}
                <tr>
                    <td>{{ donor.name }}</td>
                    <td>{{ donor.phone }}</td>
                    <td>{{ donor.email }}</td>
                    <td>{{ donor.quantity }}</td>
                    <td>{{ donor.payment_method }}</td>
                    <td>
                        {% if donor.payment_proof %}
                        <a href="{{ url_for('static', filename='uploads/' + donor.payment_proof) }}" target="_blank">View</a>
                        {% else %}
                        No Proof Uploaded
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <br>
        <a href="/admin-dashboard/{{ masjid }}" class="button">Back to Dashboard</a>
    </div>
</body>
</html>
